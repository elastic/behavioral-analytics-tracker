"use strict";var elasticAnalyticsDefault=(()=>{var k=Object.defineProperty;var I=Object.getOwnPropertyDescriptor;var y=Object.getOwnPropertyNames;var x=Object.prototype.hasOwnProperty;var U=(t,e)=>{for(var r in e)k(t,r,{get:e[r],enumerable:!0})},A=(t,e,r,i)=>{if(e&&typeof e=="object"||typeof e=="function")for(let n of y(e))!x.call(t,n)&&n!==r&&k(t,n,{get:()=>e[n],enumerable:!(i=I(e,n))||i.enumerable});return t};var _=t=>A(k({},"__esModule",{value:!0}),t);var V={};U(V,{default:()=>C});var P=(t,e)=>{let r=document.referrer||"";return{...e,page:{...e.page||{},referrer:r,url:window.location.href,title:document.title}}};var T={pageAttributes:P};function o(t){var i;console.log(document.cookie);let r=("; "+document.cookie).split("; "+t+"=");if(r.length===2&&r[1])return(i=r.pop())==null?void 0:i.split(";").shift()}function E(t,e,r,i="/"){let n="max-age="+r;document.cookie=t+"="+e+";  "+n+"; path="+i}function l(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,function(t){return(t^crypto.getRandomValues(new Uint8Array(1))[0]&15>>t/4).toString(16)})}var b=24*60*60*1e3,R=30*60*1e3,c="EA_UID",S="EA_SID",v=class{constructor(e){this.userToken=e.user.token||o(c)||l(),this.userTokenExpirationInterval=e.user.lifetime||b,this.sessionTokenExpirationInterval=e.session.lifetime||R,this.userToken!==o(c)&&this.updateUserExpire()}getUserUuid(){let e=o(c);return e||(this.updateUserExpire(),e=o(c)),e}getSessionUuid(){return o(S)}updateSessionExpire(){let e=o(S)||l();E(S,e,this.sessionTokenExpirationInterval)}updateUserExpire(){E(c,this.userToken,this.userTokenExpirationInterval)}};var O=(t,e,r)=>Object.values(r).reduce((i,n)=>n(t,i),{...e}),u=class{constructor(e){var r,i,n,p;this.apiURL=`${e.endpoint}/_application/analytics/${e.collectionName}/event`,this.apiKey=e.apiKey,this.debug=e.debug||!1,this.userSessionStore=new v({user:{token:typeof((r=e.user)==null?void 0:r.token)=="function"?e.user.token():(i=e.user)==null?void 0:i.token,lifetime:(n=e.user)==null?void 0:n.lifetime},session:{lifetime:(p=e.session)==null?void 0:p.lifetime}}),this.dataProviders={...T,...e.dataProviders||{}}}trackEvent(e,r){this.userSessionStore.updateSessionExpire();let i=this.getUserSession(),n=O(e,{...r,...i},this.dataProviders),p=JSON.stringify(n),w=this.debug?"?debug=true":"",g=`${this.apiURL}/${e}${w}`,m={type:"application/json",authorization:`Basic ${this.apiKey}`};if(navigator.sendBeacon!=null){let a=new Blob([p],m);navigator.sendBeacon(g,a)}else{let a=new XMLHttpRequest;a.open("POST",g,!0),a.setRequestHeader("Content-Type","application/json"),a.setRequestHeader("Authorization",`Basic ${this.apiKey}`),a.send(p)}}trackPageView(e){this.trackEvent("page_view",e||{})}trackSearchClick(e){this.trackEvent("search_click",e)}trackSearch(e){this.trackEvent("search",e)}getUserSession(){return{user:{id:this.userSessionStore.getUserUuid()},session:{id:this.userSessionStore.getSessionUuid()}}}};var s,d=[],f={createTracker:t=>(s=new u(t),d.forEach(([e,r])=>{s==null||s.trackEvent(e,r)}),s),trackPageView:t=>{if(!s){d.push(["page_view",{}]);return}s.trackPageView(t)},trackSearchClick:t=>{if(!s){d.push(["search_click",t]);return}s.trackSearchClick(t)},trackSearch:t=>{if(!s){d.push(["search",t]);return}s.trackSearch(t)}},h=()=>{f.trackPageView({})};window.addEventListener("pageshow",h);if(window.history){let t=window.history.pushState;window.history.pushState=(...e)=>(window.dispatchEvent(new Event("ewt:pushstate")),t.apply(window.history,e)),window.addEventListener("ewt:pushstate",h),window.addEventListener("popstate",h)}else window.addEventListener("hashchange",h);var C=f;return _(V);})();
var elasticAnalytics = elasticAnalyticsDefault.default
